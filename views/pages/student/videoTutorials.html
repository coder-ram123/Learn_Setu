<%- include('../../partials/student/header.html') %>
<link rel="stylesheet" href="/css/student/textTutorials.css">
</head>

<body>
    <%- include('../../partials/student/sidebar.html') %>
    <%- include('../../partials/student/navbar.html') %>

    <!-- Main Content for Course Materials -->
    <div class="content">
        <div class="heading">Recorded Lectures</div>

        <!-- Units and Subunits -->
        <div class="unit">
            <div class="unit-header" onclick="toggleSubunits('unit1')">Unit 1: Life and Literature</div>
            <div class="subunit-list" id="unit1">
                <div class="subunit" onclick="openVideo(0)">1.1 Life</div>
                <div class="subunit" onclick="openVideo(1)">1.2 A Synopsis - The Swiss Family Robinson</div>
                <div class="subunit" onclick="openVideo(2)">1.3 Have you ever seen…?</div>
            </div>
        </div>

        <div class="unit">
            <div class="unit-header" onclick="toggleSubunits('unit2')">Unit 2: Poetry and Nature</div>
            <div class="subunit-list" id="unit2">
                <div class="subunit" onclick="openVideo(3)">2.1 Invictus</div>
                <div class="subunit" onclick="openVideo(4)">2.2 A True Story of Sea Turtles</div>
                <div class="subunit" onclick="openVideo(5)">2.3 Somebody’s Mother</div>
            </div>
        </div>

        <!-- Video Player -->
        <video id="videoPlayer" width="100%" height="500px" controls>
            <source src="" type="video/mp4">
            Your browser does not support the video tag.
        </video>

        <!-- Previous and Next buttons -->
        <div class="navigation-buttons">
            <button class="btn" id="prevBtn" onclick="prevVideo()">Previous</button>
            <button class="btn" id="nextBtn" onclick="nextVideo()">Next</button>
        </div>
    </div>

    <script>
        // List of video files (or URLs)
        const videoFiles = [
            '/video/true_story.mp4',                          // 1.1 Life
            '/video/true_story.mp4',                      // 1.2 A Synopsis - The Swiss Family Robinson
            '/video/true_story.mp4',                          // 1.1 Life
            '/video/true_story.mp4',                      // 2.1 Invictus
            '/video/true_story.mp4',                          // 1.1 Life
            '/video/true_story.mp4',            
        ];

        let currentIndex = -1; // Track the currently displayed video

        // Function to show/hide subunit list on unit click
        function toggleSubunits(unitId) {
            const subunitList = document.getElementById(unitId);
            subunitList.style.display = (subunitList.style.display === "block") ? "none" : "block";
        }

        // Function to open and play the selected video
        function openVideo(index) {
            currentIndex = index; // Update the current index to the clicked session
            const videoPlayer = document.getElementById('videoPlayer');
            videoPlayer.src = videoFiles[currentIndex]; // Set the new video file
            videoPlayer.load(); // Load the new video
            videoPlayer.play(); // Start playing the video
        }

        // Function to play previous video
        function prevVideo() {
            if (currentIndex > 0) {
                currentIndex--;
                openVideo(currentIndex); // Play previous video
            }
        }

        // Function to play next video
        function nextVideo() {
            if (currentIndex < videoFiles.length - 1) {
                currentIndex++;
                openVideo(currentIndex); // Play next video
            }
        }

        // Load the first video by default when the page loads
        openVideo(currentIndex);
    </script>

    <%- include('../../partials/student/footer.html') %>
